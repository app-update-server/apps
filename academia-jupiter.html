<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Júpiter Smart Academy | Masterclass Profissional</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">

    <style>
        /* --- DESIGN TOKENS & THEME --- */
        :root {
            --color-primary: #3981e5; /* Azul da Marca */
            --color-primary-dark: #2a65b8;
            --color-accent: #f49f1a; /* Laranja de Acento (para detalhes) */
            --color-whatsapp: #25D366; /* Verde Oficial WhatsApp */
            --color-whatsapp-dark: #128c7e;
            
            --bg-app: #111827;
            --bg-panel: #1f2937;
            --bg-panel-hover: #374151;
            --border-color: #374151;
            
            --text-primary: #f9fafb;
            --text-secondary: #d1d5db;
            --text-muted: #9ca3af;
            
            --success-color: #10b981;
            --radius-md: 8px;
            --radius-lg: 12px;
            --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
            --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
            
            --header-height: 64px;
            --sidebar-width: 340px;
        }

        /* --- RESET & BASE STYLES --- */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg-app);
            color: var(--text-primary);
            height: 100vh;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            background-image: radial-gradient(circle at 80% 10%, rgba(244, 159, 26, 0.08), transparent 40%),
                              radial-gradient(circle at 10% 90%, rgba(57, 129, 229, 0.08), transparent 40%);
        }
        a { text-decoration: none; color: inherit; }
        button { border: none; background: none; cursor: pointer; font-family: inherit; }

        /* --- LAYOUT COMPONENTS --- */
        
        /* Header */
        .app-header {
            height: var(--header-height);
            padding: 0 24px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            background-color: rgba(31, 41, 55, 0.8);
            backdrop-filter: blur(12px);
            border-bottom: 1px solid var(--border-color);
            z-index: 10;
        }
        .brand {
            display: flex; align-items: center; gap: 12px;
            font-weight: 700; font-size: 1.125rem;
        }
        .brand-icon {
            color: var(--color-primary); font-size: 1.5rem;
        }
        .user-progress-container {
            display: flex; align-items: center; gap: 12px;
            font-size: 0.875rem; color: var(--text-secondary);
            background: rgba(0,0,0,0.2); padding: 6px 12px; border-radius: 20px;
        }
        .progress-bar {
            width: 120px; height: 6px;
            background-color: rgba(255,255,255,0.1);
            border-radius: 4px; overflow: hidden;
        }
        .progress-fill {
            height: 100%; background-color: var(--color-primary);
            width: 0%; transition: width 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }

        /* Main Content Area */
        .main-container {
            flex: 1; display: flex; overflow: hidden;
            position: relative;
        }

        /* Video Stage */
        .video-stage {
            flex: 1; display: flex; flex-direction: column;
            overflow-y: auto; padding: 32px;
        }
        .video-wrapper {
            width: 100%; max-width: 1024px; margin: 0 auto;
            aspect-ratio: 16/9;
            background-color: #000;
            border-radius: var(--radius-lg);
            overflow: hidden;
            box-shadow: 0 20px 25px -5px rgb(0 0 0 / 0.2), 0 8px 10px -6px rgb(0 0 0 / 0.2);
            border: 1px solid rgba(255,255,255,0.05);
        }
        iframe { width: 100%; height: 100%; border: none; }
        
        .video-info {
            max-width: 1024px; margin: 32px auto 0;
        }
        .video-meta {
            display: flex; gap: 12px; margin-bottom: 16px;
            font-size: 0.875rem; color: var(--text-secondary); font-weight: 500;
        }
        .meta-badge {
            padding: 6px 12px; border-radius: 20px;
            background-color: var(--bg-panel); border: 1px solid var(--border-color);
            display: flex; align-items: center; gap: 6px;
        }
        .meta-badge.highlight {
            color: var(--color-primary); 
            background-color: rgba(57, 129, 229, 0.1); 
            border-color: rgba(57, 129, 229, 0.2);
        }
        .video-title {
            font-size: 2rem; font-weight: 800; margin-bottom: 16px; letter-spacing: -0.025em;
        }
        .video-description {
            color: var(--text-secondary); line-height: 1.7; font-size: 1rem;
        }

        /* Sidebar & Navigation */
        .sidebar {
            width: var(--sidebar-width);
            background-color: var(--bg-panel);
            border-left: 1px solid var(--border-color);
            display: flex; flex-direction: column;
            z-index: 5;
        }
        .sidebar-header {
            padding: 20px;
            border-bottom: 1px solid var(--border-color);
            font-weight: 700; color: var(--text-primary); font-size: 1rem;
        }
        .module-nav {
            flex: 1; overflow-y: auto;
        }

        /* Accordion Module Design */
        .module-item {
            border-bottom: 1px solid var(--border-color);
        }
        .module-header {
            width: 100%; padding: 18px 20px;
            display: flex; align-items: center; justify-content: space-between;
            color: var(--text-primary); font-weight: 600; text-align: left;
            transition: background-color 0.2s; font-size: 0.95rem;
        }
        .module-header:hover { background-color: var(--bg-panel-hover); }
        .module-title-text { display: flex; align-items: center; gap: 10px; }
        .module-number {
            background: rgba(255,255,255,0.05); width: 24px; height: 24px;
            display: flex; align-items: center; justify-content: center;
            border-radius: 50%; font-size: 0.75rem; color: var(--text-muted);
        }
        .module-toggle-icon { transition: transform 0.3s; color: var(--text-muted); font-size: 0.9rem; }
        .module-item.active .module-toggle-icon { transform: rotate(180deg); }

        .lesson-list {
            display: none; background-color: rgba(17, 24, 39, 0.3);
        }
        .module-item.active .lesson-list { display: block; }

        .lesson-item {
            display: flex; align-items: flex-start; gap: 14px;
            padding: 14px 20px;
            cursor: pointer; transition: all 0.2s;
            border-left: 3px solid transparent;
        }
        .lesson-item:hover { background-color: var(--bg-panel-hover); }
        .lesson-item.active-lesson {
            background-color: rgba(57, 129, 229, 0.08); 
            border-left-color: var(--color-primary);
        }
        .lesson-item.watched .lesson-title { color: var(--text-muted); }

        .lesson-status-icon {
            margin-top: 3px; color: var(--text-muted); font-size: 1.1rem;
        }
        .lesson-item.watched .lesson-status-icon { color: var(--success-color); }
        .lesson-item.active-lesson .lesson-status-icon.fa-play-circle { color: var(--color-primary); }

        .lesson-content { flex: 1; }
        .lesson-title { font-size: 0.9rem; margin-bottom: 6px; line-height: 1.4; font-weight: 500; }
        .lesson-duration { font-size: 0.75rem; color: var(--text-muted); display: flex; align-items: center; gap: 5px; }

        /* Sidebar Footer */
        .sidebar-footer {
            padding: 20px; border-top: 1px solid var(--border-color);
        }
        .support-card {
            /* Gradiente sutil usando as cores da marca + um toque de verde */
            background: linear-gradient(to right, rgba(57, 129, 229, 0.05), rgba(37, 211, 102, 0.05));
            padding: 16px; border-radius: var(--radius-lg); text-align: center;
            border: 1px solid rgba(255,255,255,0.05);
        }
        .support-text { font-size: 0.875rem; color: var(--text-secondary); margin-bottom: 12px; }
        
        /* --- AJUSTE DO BOTÃO WHATSAPP --- */
        .btn-support {
            width: 100%; padding: 12px;
            display: flex; align-items: center; justify-content: center; gap: 10px;
            background-color: var(--color-whatsapp); /* Verde Oficial */
            color: #fff;
            border-radius: var(--radius-md); font-weight: 600;
            transition: all 0.2s; text-shadow: 0 1px 2px rgba(0,0,0,0.1);
        }
        .btn-support:hover { 
            background-color: var(--color-whatsapp-dark); 
            transform: translateY(-2px); 
            box-shadow: 0 4px 12px rgba(37, 211, 102, 0.3); /* Sombra verde */
        }

        /* --- RESPONSIVE DESIGN --- */
        @media (max-width: 1024px) {
            .main-container { flex-direction: column; }
            .video-stage { flex: none; padding: 20px; }
            .sidebar {
                width: 100%; height: auto; flex: 1;
                border-left: none; border-top: 1px solid var(--border-color);
            }
            .module-nav { max-height: none; }
        }

        @media (max-width: 768px) {
            .app-header { padding: 0 16px; }
            .brand span { display: none; }
            .video-title { font-size: 1.5rem; }
            .sidebar-header, .module-header, .lesson-item, .sidebar-footer { padding-left: 16px; padding-right: 16px; }
        }
    </style>
</head>
<body>

    <header class="app-header">
        <div class="brand">
            <i class="fas fa-chart-line brand-icon"></i>
            <div>Júpiter Smart <span>Academy</span></div>
        </div>
        <div class="user-progress-container">
            <span id="progress-text">0% Concluído</span>
            <div class="progress-bar">
                <div class="progress-fill" id="progress-fill"></div>
            </div>
        </div>
    </header>

    <main class="main-container">
        
        <section class="video-stage">
            <div class="video-wrapper">
                <iframe id="video-player" src="" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
            </div>

            <div class="video-info">
                <div class="video-meta">
                    <span class="meta-badge highlight" id="video-module-name">
                        <i class="fa-solid fa-layer-group" style="font-size: 0.8em;"></i>
                        <span>Módulo</span>
                    </span>
                    <span class="meta-badge">
                        <i class="fa-regular fa-clock"></i>
                        <span id="video-duration">--:--</span>
                    </span>
                </div>
                <h1 class="video-title" id="video-title">Carregando sua aula...</h1>
                <p class="video-description" id="video-desc">Aguarde um momento enquanto preparamos o conteúdo para você.</p>
            </div>
        </section>

        <aside class="sidebar">
            <div class="sidebar-header">Conteúdo Programático</div>
            
            <nav class="module-nav" id="module-accordion-container">
                </nav>

            <div class="sidebar-footer">
                <div class="support-card">
                    <p class="support-text">Dúvidas durante a jornada? Nosso time está pronto para ajudar.</p>
                    <a href="https://wa.me/5521980649585?text=Ol%C3%A1%2C%20sou%20aluno%20do%20*J%C3%BApiter%20Smart%20Academy*%20e%20preciso%20de%20ajuda." target="_blank" class="btn-support">
                        <i class="fa-brands fa-whatsapp" style="font-size: 1.2em;"></i> Falar com Suporte VIP
                    </a>
                </div>
            </div>
        </aside>

    </main>

    <script>
        // ... (DADOS DO CURSO - courseData - MANTIDOS IGUAIS AO ANTERIOR) ...
        const courseData = [
            {
                id: "mod_inicio",
                title: "1. Início Rápido & Filosofia",
                lessons: [
                    { id: "UUX3d1jZe3k", title: "Bem-vindo: A Filosofia do Controle 100% Offline", duration: "02:05", description: "Entenda por que o Júpiter Smart Pro é diferente: seus dados financeiros ficam apenas no seu computador, garantindo total privacidade e segurança." },
                    { id: "5iCB8jRLBh4", title: "Configurando Suas Contas Financeiras", duration: "02:19", description: "O primeiro passo prático: aprenda a cadastrar suas contas bancárias, carteiras digitais e dinheiro em espécie corretamente." },
                    { id: "7lVJ9HIOIfU", title: "Personalizando Categorias de Receitas e Despesas", duration: "02:33", description: "Organize suas finanças do seu jeito. Crie, edite e exclua categorias para que os relatórios reflitam sua realidade." },
                    { id: "Ab413puW9qw", title: "Seu Primeiro Lançamento e o Poder das Tags", duration: "03:22", description: "Vamos registrar uma movimentação financeira juntos e descobrir como usar Tags para agrupar lançamentos de projetos ou viagens específicas." }
                ]
            },
            {
                id: "mod_operacao",
                title: "2. Operação Diária Essencial",
                lessons: [
                    { id: "LAuQrRJXTrM", title: "Movendo Dinheiro: Transferências Entre Contas", duration: "02:24", description: "Aprenda a registrar transferências (ex: da conta corrente para a poupança) sem duplicar lançamentos ou bagunçar seus relatórios." },
                    { id: "0KhdyAayBl8", title: "Dominando os Status: Pendente vs. Pago", duration: "02:17", description: "Por que seu saldo nunca bate com o banco? Entenda a diferença crucial entre um lançamento agendado e um já efetivado." },
                    { id: "3PCjVNwIWi4", title: "Gerenciando Contas a Receber (Para Autônomos)", duration: "02:08", description: "Não perca o controle de quem te deve. Saiba como registrar e monitorar valores que você tem a receber de clientes." },
                    { id: "yw9VhtdortA", title: "Seu Assistente de Cobrança: Alertas Inteligentes", duration: "02:11", description: "Veja como a IA do sistema monitora datas de vencimento e te avisa proativamente sobre contas a receber e a pagar." }
                ]
            },
            {
                id: "mod_automacao",
                title: "3. Automações e Gestão de Dívidas",
                lessons: [
                    { id: "MvI-ifCDUYQ", title: "Automação 1: Configurando Contas Recorrentes", duration: "02:19", description: "Pare de lançar a mesma conta todo mês. Aprenda a automatizar o registro de aluguéis, assinaturas e contas fixas." },
                    { id: "BbFnRcTWIuU", title: "Automação 2: O Painel de Lembretes do Mês", duration: "02:39", description: "Veja o resultado das suas automações: um painel centralizado que te mostra tudo o que vence no mês atual." },
                    { id: "7QyatJ1LNnI", title: "Gerenciando Cartões de Crédito: O Cadastro Correto", duration: "01:48", description: "O passo mais importante para não se perder nas faturas: como cadastrar seus cartões, datas de fechamento e vencimento." },
                    { id: "yuOy_VIDovM", title: "Lançando Compras Parceladas (Cartão e Boleto)", duration: "02:39", description: "Use o modal inteligente de parcelamento para registrar compras a prazo e projetar suas dívidas futuras." },
                    { id: "rMSACFifzXg", title: "Analisando Suas Faturas de Cartão", duration: "02:23", description: "Navegue pelo visualizador de faturas para entender seus gastos por cartão e mês a mês." },
                    { id: "-_mWZL-xCEM", title: "Gerenciador de Parcelas e Amortização", duration: "03:06", description: "Aprenda a antecipar parcelas, amortizar dívidas e ver o impacto disso no seu fluxo de caixa futuro." }
                ]
            },
             {
                id: "mod_analise",
                title: "4. Análise Estratégica e Futuro",
                lessons: [
                    { id: "uwiaiG7yqG4", title: "Preparando o Ambiente: Importando Dados de Teste", duration: "01:53", description: "Aprenda a importar o arquivo de demonstração para explorar os gráficos e relatórios com dados fictícios antes de usar os seus." },
                    { id: "ukGGf8QTERU", title: "Análise Visual: Entendendo Seus Gráficos Financeiros", duration: "02:23", description: "Para onde vai seu dinheiro? Interpretando os 3 principais gráficos que respondem a essa pergunta crucial." },
                    { id: "0Oz4kfj-cA0", title: "Mergulho Profundo: Análise Avançada por Tag e Categoria", duration: "02:19", description: "Use filtros poderosos para detalhar seus gastos. Descubra, por exemplo, quanto custou exatamente aquela viagem de férias." },
                    { id: "3pPvYWu_1d4", title: "Preparando Seu Laboratório de Estratégia e Investimentos", duration: "01:52", description: "Configure os parâmetros dos seus investimentos (CDB, Poupança, etc.) para simular cenários futuros." },
                    { id: "1hfkiPPr8xU", title: "Projetando Seu Futuro: O Laboratório Financeiro", duration: "02:19", description: "Use a IA para projetar seu saldo daqui a 1 ou 2 anos, considerando sua capacidade real de economia e rendimentos." }
                ] 
            },
            {
                id: "mod_seguranca",
                title: "5. Segurança Crítica e Backups",
                lessons: [
                    { id: "Blu8Q6LcZHM", title: "Backup e Restauração: Protegendo Seus Dados", duration: "02:11", description: "Essencial! Aprenda a criar e restaurar backups manuais para garantir que seus dados nunca sejam perdidos, mesmo se trocar de PC." },
                    { id: "S5NVlrtP0Sk", title: "Cofre Digital: O Assistente de PIN de 3 Passos", duration: "02:24", description: "Ative a camada extra de segurança com um PIN de acesso, garantindo que só você abra o aplicativo." },
                    { id: "y13zunbVwg4", title: "AVISO CRÍTICO: Alterar e Recuperar Seu PIN", duration: "02:16", description: "Entenda o mecanismo de segurança e o ÚNICO método para recuperar o acesso caso esqueça seu PIN. Assista com atenção!" }
                ] 
            },
            {
                id: "mod_conclusao",
                title: "6. Conclusão e Próximos Passos",
                lessons: [
                    { id: "IznZiSDAkUQ", title: "Como Obter Suporte Técnico Oficial", duration: "01:35", description: "Saiba qual é o canal oficial e exclusivo para tirar dúvidas técnicas e reportar problemas com sua licença válida." }
                ] 
            }
        ];

        // --- Estado da Aplicação ---
        const appState = {
            watchedLessons: new Set(JSON.parse(localStorage.getItem('jupiterSmart_watched')) || []),
            activeModuleIndex: 0,
            currentLessonId: null
        };

        // --- Referências aos Elementos do DOM ---
        const dom = {
            player: document.getElementById('video-player'),
            videoTitle: document.getElementById('video-title'),
            videoDesc: document.getElementById('video-desc'),
            videoDuration: document.getElementById('video-duration'),
            videoModuleName: document.getElementById('video-module-name'),
            accordionContainer: document.getElementById('module-accordion-container'),
            progressText: document.getElementById('progress-text'),
            progressFill: document.getElementById('progress-fill')
        };

        // --- Funções Principais ---

        function initApp() {
            renderSidebar();
            updateGlobalProgress();
            
            // --- AJUSTE 1: Carregar o primeiro vídeo imediatamente ---
            const firstModule = courseData[0];
            if (firstModule && firstModule.lessons.length > 0) {
                const firstLesson = firstModule.lessons[0];
                // Chama a função completa que carrega o iframe
                loadLesson(firstLesson.id, firstModule.title);
                toggleModule(0);
            }
        }

        function renderSidebar() {
            // (Código da renderização da sidebar mantido igual)
            dom.accordionContainer.innerHTML = courseData.map((module, moduleIdx) => {
                const isActiveModule = moduleIdx === appState.activeModuleIndex;
                const lessonsHTML = module.lessons.map((lesson, lessonIdx) => {
                    const isWatched = appState.watchedLessons.has(lesson.id);
                    const isActiveLesson = lesson.id === appState.currentLessonId;
                    let iconClass = isWatched ? "fa-solid fa-circle-check" : "fa-regular fa-circle";
                    if (isActiveLesson && !isWatched) iconClass = "fa-regular fa-circle-play";

                    return `
                        <div class="lesson-item ${isActiveLesson ? 'active-lesson' : ''} ${isWatched ? 'watched' : ''}" 
                             onclick="handleLessonClick('${lesson.id}', '${module.title}')">
                            <i class="${iconClass} lesson-status-icon"></i>
                            <div class="lesson-content">
                                <div class="lesson-title">
                                    <span style="color: var(--text-muted); margin-right: 6px; font-size: 0.85em;">${moduleIdx + 1}.${lessonIdx + 1}</span>
                                    ${lesson.title.split(': ')[1] || lesson.title}
                                </div>
                                <div class="lesson-duration"><i class="fa-regular fa-clock" style="font-size: 0.7em;"></i> ${lesson.duration}</div>
                            </div>
                        </div>
                    `;
                }).join('');

                return `
                    <div class="module-item ${isActiveModule ? 'active' : ''}" id="module-${moduleIdx}">
                        <button class="module-header" onclick="toggleModule(${moduleIdx})">
                            <div class="module-title-text">
                                <span class="module-number">${moduleIdx + 1}</span>
                                ${module.title.split('. ')[1]}
                            </div>
                            <i class="fa-solid fa-chevron-down module-toggle-icon"></i>
                        </button>
                        <div class="lesson-list">
                            ${lessonsHTML}
                        </div>
                    </div>
                `;
            }).join('');
        }

        window.handleLessonClick = function(videoId, moduleTitle) {
            loadLesson(videoId, moduleTitle);
            markAsWatched(videoId);
            renderSidebar();
            if (window.innerWidth <= 1024) {
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }
        };

        function loadLesson(videoId, moduleTitle) {
            loadLessonMetadata(videoId, moduleTitle);
            dom.player.src = `https://www.youtube.com/embed/${videoId}?autoplay=1&rel=0&modestbranding=1&color=white`;
        }

        function loadLessonMetadata(videoId, moduleTitle) {
            let selectedLesson;
            for (const module of courseData) {
                selectedLesson = module.lessons.find(l => l.id === videoId);
                if (selectedLesson) break;
            }
            if (!selectedLesson) return;
            appState.currentLessonId = videoId;
            dom.videoTitle.textContent = selectedLesson.title;
            dom.videoDesc.textContent = selectedLesson.description || "Assista a esta aula para dominar o conteúdo.";
            dom.videoDuration.textContent = selectedLesson.duration;
            dom.videoModuleName.querySelector('span').textContent = moduleTitle.split('. ')[1] || moduleTitle;
        }

        window.toggleModule = function(index) {
            appState.activeModuleIndex = appState.activeModuleIndex === index ? null : index;
            renderSidebar();
        }

        function markAsWatched(videoId) {
            if (!appState.watchedLessons.has(videoId)) {
                appState.watchedLessons.add(videoId);
                localStorage.setItem('jupiterSmart_watched', JSON.stringify([...appState.watchedLessons]));
                updateGlobalProgress();
            }
        }

        function updateGlobalProgress() {
            const totalLessons = courseData.reduce((count, module) => count + module.lessons.length, 0);
            if (totalLessons === 0) return;
            const watchedCount = appState.watchedLessons.size;
            const percentage = Math.round((watchedCount / totalLessons) * 100);
            dom.progressText.textContent = `${percentage}% Concluído`;
            dom.progressFill.style.width = `${percentage}%`;
        }

        initApp();
    </script>
</body>
</html>
